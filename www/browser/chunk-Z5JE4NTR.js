import{c as Y}from"./chunk-5RNJSWJU.js";import{b as J}from"./chunk-IIKFY65W.js";import{F as R,H as k,K as E,V as U,Z as z,b as f,d as x,e as l,ga as T,ha as j,i as a,ia as W,j as p,ja as F,k as c,ka as K,l as _,la as Q,m,ma as q,n as o,na as H,o as C,oa as M,q as P,ra as X,s as h,sa as S,t as w,va as Z,x as L,xa as $,z as y}from"./chunk-NUXSCCIY.js";import"./chunk-G7XXDTQ5.js";import"./chunk-5T54POBR.js";import"./chunk-AHYTFRZN.js";import"./chunk-4PGTP63H.js";import"./chunk-HC6MZPB3.js";import"./chunk-NBBNAC2E.js";import"./chunk-O3H6XU3T.js";import"./chunk-GLBLXQ6N.js";import"./chunk-PPEBARQN.js";import"./chunk-TAHDAPYO.js";import"./chunk-5U2FUULQ.js";import"./chunk-SLNPOJBS.js";import"./chunk-7XJAICMY.js";import"./chunk-MCRJI3T3.js";import"./chunk-AFC5P2X6.js";import"./chunk-YHLQW4KP.js";import"./chunk-MM5QLNJM.js";import"./chunk-72ZMTLHO.js";import"./chunk-2EOHHFOF.js";import"./chunk-JXIEZMHN.js";import"./chunk-JTSJSQ6Q.js";import{f as s}from"./chunk-MIURFOFH.js";var b=function(t){return t.Aztec="AZTEC",t.Codabar="CODABAR",t.Code39="CODE_39",t.Code93="CODE_93",t.Code128="CODE_128",t.DataMatrix="DATA_MATRIX",t.Ean8="EAN_8",t.Ean13="EAN_13",t.Itf="ITF",t.Pdf417="PDF_417",t.QrCode="QR_CODE",t.UpcA="UPC_A",t.UpcE="UPC_E",t}(b||{});var d=Y("BarcodeScanner",{web:()=>import("./chunk-NEAZISU7.js").then(t=>new t.BarcodeScannerWeb)});function tt(t,e){if(t&1&&(m(0,"ion-item")(1,"ion-label",8),h(2),o(),C(3,"ion-input",9),o()),t&2){let v=e.$implicit;a(2),w(v.format),a(1),c("value",v.rawValue)}}var V=(()=>{let e=class e{constructor(i,r,n,u){this.alertController=i,this.activeroute=r,this.router=n,this.apiService=u,this.nombre="",this.boton=["Cerrar Sesi\xF3n"],this.isSupported=!1,this.barcodes=[],this.activeroute.queryParams.subscribe(A=>{var N,O,g,D,I;(N=this.router.getCurrentNavigation())!=null&&N.extras.state&&(this.userHome=(g=(O=this.router.getCurrentNavigation())==null?void 0:O.extras.state)==null?void 0:g.user,this.idAlumno=(I=(D=this.router.getCurrentNavigation())==null?void 0:D.extras.state)==null?void 0:I.id)})}ngOnInit(){d.isSupported().then(i=>{this.isSupported=i.supported})}scan(){return s(this,null,function*(){if(!(yield this.requestPermissions())){this.presentAlert();return}let{barcodes:r}=yield d.scan({formats:[b.QrCode]});this.aperturaAlert(),r.length>0?(this.capturaAlert(),this.barcodes.push(...r)):this.errorAlert()})}requestPermissions(){return s(this,null,function*(){let{camera:i}=yield d.requestPermissions();return i==="granted"||i==="limited"})}presentAlert(){return s(this,null,function*(){yield(yield this.alertController.create({header:"Permiso de C\xE1mara",message:"Se necesita acceso a la c\xE1mara para escanear c\xF3digos QR. Por favor, habilite el acceso a la c\xE1mara en la configuraci\xF3n de su dispositivo.",buttons:["OK"]})).present()})}aperturaAlert(){return s(this,null,function*(){yield(yield this.alertController.create({header:"Apertura de escaner exitosa",message:"Se abri\xF3 el escaner .",buttons:["OK"]})).present()})}capturaAlert(){return s(this,null,function*(){yield(yield this.alertController.create({header:"Escaneo exitoso",message:"Se almacen\xF3 exitosamente el QR en el array.",buttons:["OK"]})).present()})}errorAlert(){return s(this,null,function*(){yield(yield this.alertController.create({header:"Escaneo Fallido",message:"El escaneo no se pudo realizar.",buttons:["OK"]})).present()})}registrarAsistencia(i,r,n){let u={alumno_id:this.idAlumno,codigo:i,seccion:r,fecha:n};this.apiService.registrarAsistencia(u).subscribe(A=>{console.log(A)})}};e.\u0275fac=function(r){return new(r||e)(p(Z),p(R),p(k),p(J))},e.\u0275cmp=x({type:e,selectors:[["app-camera"]],decls:14,vars:4,consts:[[3,"translucent"],[3,"fullscreen"],["collapse","condense"],["size","large"],[4,"ngFor","ngForOf"],["slot","fixed","vertical","bottom","horizontal","end"],[3,"disabled","click"],["name","scan"],["position","stacked"],["type","text",3,"value"]],template:function(r,n){r&1&&(m(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),h(3,"Escanear QR"),o()()(),m(4,"ion-content",1)(5,"ion-header",2)(6,"ion-toolbar")(7,"ion-title",3),h(8,"Escanear QR"),o()()(),m(9,"ion-list"),_(10,tt,4,2,"ion-item",4),o(),m(11,"ion-fab",5)(12,"ion-fab-button",6),P("click",function(){return n.scan()}),C(13,"ion-icon",7),o()()()),r&2&&(c("translucent",!0),a(4),c("fullscreen",!0),a(6),c("ngForOf",n.barcodes),a(2),c("disabled",!n.isSupported))},dependencies:[L,T,j,W,F,K,Q,q,H,M,X,S,z],styles:[".image-container[_ngcontent-%COMP%]{background:url(https://d347bo4ltvvnaz.cloudfront.net/images/preview/Fuse_LifeOnMission_MarketingAssets_Social-Overlay_Transparent_3_preview.jpg) no-repeat center center fixed;position:relative;-webkit-background-size:cover;-moz-background-size:cover;-o-background-size:cover;background-size:contain;background-position:center;height:100vh;width:auto;display:flex;align-items:flex-end;justify-content:center;padding-bottom:10vh}.overlay-button[_ngcontent-%COMP%]{position:relative;size:auto;margin:10 auto;display:flex}"]});let t=e;return t})();var et=[{path:"",component:V}],B=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=l({type:e}),e.\u0275inj=f({imports:[E.forChild(et),E]});let t=e;return t})();var Ot=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=l({type:e}),e.\u0275inj=f({imports:[y,U,$,B]});let t=e;return t})();export{Ot as CameraPageModule};
