import{a as Z}from"./chunk-C3XMOHXT.js";import{b as Y}from"./chunk-IIKFY65W.js";import{$ as T,H as m,K as j,L as r,M as A,N as P,O as k,P as v,Q as N,R as O,S as F,T as L,V as S,W as E,Z as R,a as f,aa as D,b as g,ba as G,c as h,ca as V,d as M,e as y,ga as _,i as c,j as s,ja as q,k as l,ka as H,la as U,m as a,ma as z,n as o,o as p,oa as B,q as b,ra as K,s as d,sa as W,va as J,wa as Q,xa as X,z as w}from"./chunk-NUXSCCIY.js";import"./chunk-G7XXDTQ5.js";import"./chunk-5T54POBR.js";import"./chunk-AHYTFRZN.js";import"./chunk-4PGTP63H.js";import"./chunk-HC6MZPB3.js";import"./chunk-NBBNAC2E.js";import"./chunk-O3H6XU3T.js";import"./chunk-GLBLXQ6N.js";import"./chunk-PPEBARQN.js";import"./chunk-TAHDAPYO.js";import"./chunk-5U2FUULQ.js";import"./chunk-SLNPOJBS.js";import"./chunk-7XJAICMY.js";import"./chunk-MCRJI3T3.js";import"./chunk-AFC5P2X6.js";import"./chunk-YHLQW4KP.js";import"./chunk-MM5QLNJM.js";import"./chunk-72ZMTLHO.js";import"./chunk-2EOHHFOF.js";import"./chunk-JXIEZMHN.js";import"./chunk-JTSJSQ6Q.js";import{f as x}from"./chunk-MIURFOFH.js";var tt=(()=>{let t=class t{setAuth(e){this.isAuth=e}constructor(e){this.router=e,this.isAuth=!1}canActivate(e,i){return this.isAuth?!0:this.router.navigate(["/login"])}};t.\u0275fac=function(i){return new(i||t)(h(m))},t.\u0275prov=f({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var et=(()=>{let t=class t{setAuth(e){this.isAuth=e}constructor(e){this.router=e,this.isAuth=!1}canActivate(e,i){return this.isAuth?!0:this.router.navigate(["/login"])}};t.\u0275fac=function(i){return new(i||t)(h(m))},t.\u0275prov=f({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var it=(()=>{let t=class t{login(){this.consumoapi.login(this.usuario.value.user,this.usuario.value.pass).subscribe(e=>{if(this.typeuser=e.body,console.log("bbb"+e.status),e.status==200){let i={state:{id:this.typeuser.id,user:this.typeuser.user,correo:this.typeuser.correo,nombre:this.typeuser.nombre,tipoPerfil:this.typeuser.tipoPerfil}};console.log("aaas"+this.typeuser.tipoPerfil),this.typeuser.tipoPerfil===1&&(this.authprofesor.setAuth(!0),this.router.navigate(["/home"],i)),this.typeuser.tipoPerfil===2&&(this.authalumno.setAuth(!0),this.router.navigate(["/perfilalumno"],i))}e.status===401&&this.presentAlert()},e=>{console.error("Error en inicio de sesi\xF3n:",e)})}abrirModalRegistro(){return x(this,null,function*(){let e=yield this.modalController.create({component:Z});yield e.present();let{data:i}=yield e.onWillDismiss();i&&i.registrado&&this.router.navigate(["/login"])})}presentAlert(){return x(this,null,function*(){yield(yield this.alertController.create({header:"Credenciales Incorrectas",subHeader:"(Intente nuevamente)",message:"Asegurese de ingresar correctamente sus datos.",buttons:["OK"]})).present()})}constructor(e,i,u,I,rt,ot){this.authprofesor=e,this.authalumno=i,this.router=u,this.alertController=I,this.consumoapi=rt,this.modalController=ot,this.usuario=new k({user:new v("",[r.required,r.minLength(4),r.maxLength(10)]),pass:new v("",[r.required,r.minLength(5),r.maxLength(20)]),mail:new v("",[r.required,r.minLength(10),r.maxLength(30)])})}ngOnInit(){}};t.\u0275fac=function(i){return new(i||t)(s(tt),s(et),s(m),s(J),s(Y),s(Q))},t.\u0275cmp=M({type:t,selectors:[["app-login"]],decls:27,vars:6,consts:[[3,"translucent"],[1,"ion-padding",3,"fullscreen"],["collapse","condense"],["size","large"],[3,"formGroup"],["lines","none"],["aria-hidden","true","slot","start"],["alt","","src","https://ionicframework.com/docs/img/demos/avatar.svg"],["label","Usuario","color","tertiary","labelPlacement","stacked","fill","outline","formControlName","user","placeholder","Ingrese Usuario","maxlength","10",1,"centered-input",3,"counter"],["aria-hidden","true","name","mail","slot","start"],["label","Correo","color","warning","labelPlacement","stacked","fill","outline","formControlName","mail","type","email","placeholder","email@domain.com","maxlength","30",1,"centered-input",3,"counter"],["aria-hidden","true","name","key","slot","start"],["label","Clave","color","dark","labelPlacement","stacked","fill","outline","formControlName","pass","type","password","value","password","placeholder","Ingrese clave","maxlength","20",1,"centered-input",3,"counter"],["shape","round","color","warning",3,"click"],["shape","round","color","medium",3,"click"]],template:function(i,u){i&1&&(a(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),d(3,"Ingreso en el sistema RegistrApp"),o()()(),a(4,"ion-content",1)(5,"ion-header",2)(6,"ion-toolbar")(7,"ion-title",3),d(8,"login"),o()()(),a(9,"ion-card")(10,"ion-card-content")(11,"form",4)(12,"ion-list")(13,"ion-item",5)(14,"ion-avatar",6),p(15,"img",7),o(),p(16,"ion-input",8),o(),a(17,"ion-item",5),p(18,"ion-icon",9)(19,"ion-input",10),o(),a(20,"ion-item",5),p(21,"ion-icon",11)(22,"ion-input",12),o(),a(23,"ion-button",13),b("click",function(){return u.login()}),d(24,"Login"),o(),a(25,"ion-button",14),b("click",function(){return u.abrirModalRegistro()}),d(26,"Registrarse"),o()()()()()()),i&2&&(l("translucent",!0),c(4),l("fullscreen",!0),c(7),l("formGroup",u.usuario),c(5),l("counter",!0),c(3),l("counter",!0),c(3),l("counter",!0))},dependencies:[N,A,P,L,O,F,T,D,G,V,_,q,H,U,z,B,K,W,R],styles:["ion-card[_ngcontent-%COMP%]{display:grid;justify-content:center;align-items:center;margin-top:50px;padding:3px}ion-card-content[_ngcontent-%COMP%]{display:grid;justify-content:center;align-items:center;padding:3px}ion-item[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:10px;margin:5px}ion-input[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;padding:0;margin:4px}.centered-input[_ngcontent-%COMP%]{text-align:center}.centered-label[_ngcontent-%COMP%]{text-align:center;width:100%}ion-button[_ngcontent-%COMP%]{display:grid;justify-content:center;align-items:center;padding:3px}ion-avatar[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:0;margin:12px}ion-icon[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:0;margin:20px}.container[_ngcontent-%COMP%]{display:grid;flex-flow:column-reverse;flex-direction:column;justify-content:center;align-items:center;margin-top:50px;padding:3px}"]});let n=t;return n})();var lt=[{path:"",component:it}],nt=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=y({type:t}),t.\u0275inj=g({imports:[j.forChild(lt),j]});let n=t;return n})();var wt=(()=>{let t=class t{};t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=y({type:t}),t.\u0275inj=g({imports:[w,S,E,X,nt]});let n=t;return n})();export{wt as LoginPageModule};
